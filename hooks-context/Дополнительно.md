# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

–ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤–æ—à–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Å–ø–µ–∫—Ç.

---

## –ü—Ä–∏–º–µ—Ä: usePolling –Ω–∞ `setTimeout` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫

–ü—Ä–æ—Å—Ç–µ–π—à–∞—è –≤–µ—Ä—Å–∏—è –æ–ø—Ä–æ—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `setTimeout` –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–Ω–æ–≤–∞ —Å—Ç–∞–≤–∏—Ç —Ç–∞–π–º–µ—Ä.
–í —ç—Ç–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ **–Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π –∑–∞—â–∏—Ç—ã –æ—Ç –æ—à–∏–±–æ–∫ –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö**.

```jsx
import { useEffect, useState } from 'react';

export default function usePollingSimple(url, delay = 5000, initial = []) {
  const [data, setData] = useState(initial);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchData = async () => {
      setLoading(true);
      try {
        const res = await fetch(url);
        const next = await res.json();
        setData(next); // —Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ–º, –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫
      } catch (e) {
        setError(e);
      } finally {
        setLoading(false);
        setTimeout(fetchData, delay); // —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤
      }
    };

    fetchData();
  }, [url, delay]);

  return { data, loading, error };
}
```

üîé –ú–∏–Ω—É—Å—ã —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

* –ï—Å–ª–∏ –ø—Ä–∏–¥—ë—Ç —Å—Ç–∞—Ä—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –æ–Ω –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –¥–∞–Ω–Ω—ã–µ.
* –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ `url` —Å—Ç–∞—Ä—ã–π —Ç–∞–π–º–µ—Ä –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
* –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –æ—á–µ–Ω—å –¥–æ–ª–≥–∏–π, –∑–∞–¥–µ—Ä–∂–∫–∞ ¬´—Å—ä–µ–∑–∂–∞–µ—Ç¬ª (–≤–º–µ—Å—Ç–æ 5 —Å–µ–∫—É–Ω–¥ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å 7‚Äì8).

üëâ –≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–ª–µ–∑–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å –∫–∞–∫ –ø—Ä–∏–º–µ—Ä, **–ø–æ—á–µ–º—É –Ω—É–∂–Ω—ã `ref` –∏ –æ—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤**.

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Å–º–µ–Ω—ã —è–∑—ã–∫–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

–ù–∏–∂–µ ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è i18n —á–µ—Ä–µ–∑ Context API.
–ò–¥–µ—è: –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ —Ö—Ä–∞–Ω–∏–º —Ç–µ–∫—É—â–∏–π —è–∑—ã–∫ –∏ —Å–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–µ—Ä—É—Ç `t(key)` –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –Ω–µ –∑–Ω–∞—é—Ç, –∫–∞–∫–æ–π —è–∑—ã–∫ –≤—ã–±—Ä–∞–Ω.

### 1) –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä

```jsx
// src/contexts/I18nContext.js
import { createContext, useCallback, useMemo, useState } from 'react';

const messages = {
  ru: {
    title: '–ù–æ–≤–æ—Å—Ç–∏',
    loading: '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶',
    error: '–û—à–∏–±–∫–∞',
    changeLang: '–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫',
    token: '–¢–æ–∫–µ–Ω',
  },
  en: {
    title: 'News',
    loading: 'Loading‚Ä¶',
    error: 'Error',
    changeLang: 'Change language',
    token: 'Token',
  },
};

export const I18nContext = createContext({
  locale: 'en',
  setLocale: () => {},
  t: (key) => key,
});

export function I18nProvider({ initialLocale = 'en', children }) {
  const [locale, setLocale] = useState(initialLocale);

  const t = useCallback(
    (key) => messages[locale]?.[key] ?? key,
    [locale]
  );

  const value = useMemo(() => ({ locale, setLocale, t }), [locale, t]);

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}
```

---

### 2) –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞

```jsx
// src/components/LanguageSwitcher.jsx
import { useContext } from 'react';
import { I18nContext } from '../contexts/I18nContext.js';

export default function LanguageSwitcher() {
  const { locale, setLocale, t } = useContext(I18nContext);

  return (
    <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>
      <span>{t('changeLang')}:</span>
      <button
        onClick={() => setLocale('en')}
        disabled={locale === 'en'}
        aria-pressed={locale === 'en'}
      >
        EN
      </button>
      <button
        onClick={() => setLocale('ru')}
        disabled={locale === 'ru'}
        aria-pressed={locale === 'ru'}
      >
        RU
      </button>
    </div>
  );
}
```

---

### 3) –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

```jsx
// src/components/LatestNewsI18n.jsx
import { useContext } from 'react';
import { I18nContext } from '../contexts/I18nContext.js';
import usePolling from '../hooks/usePolling.js';

export default function LatestNewsI18n() {
  const { t } = useContext(I18nContext);
  const { data: news, loading, error } = usePolling(
    import.meta.env.VITE_NEWS_URL,
    5000,
    []
  );

  if (loading) return <p>{t('loading')}</p>;
  if (error) return <p>{t('error')}: {String(error)}</p>;

  return (
    <>
      <h2>{t('title')}</h2>
      <ul>
        {news.map(n => <li key={n.id}>{n.content}</li>)}
      </ul>
    </>
  );
}
```

---

### 4) –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

```jsx
// src/App.jsx (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)
import { I18nProvider } from './contexts/I18nContext.js';
import LanguageSwitcher from './components/LanguageSwitcher.jsx';
import LatestNewsI18n from './components/LatestNewsI18n.jsx';

export default function App() {
  // ... –≤–∞—à AuthContext –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  return (
    <AuthContext.Provider value={{ token, setToken }}>
      <I18nProvider initialLocale="en">
        <div className="container">
          <LanguageSwitcher />
          <LatestNewsI18n />
          {/* –æ—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */}
        </div>
      </I18nProvider>
    </AuthContext.Provider>
  );
}
```

---

### –ó–∞–º–µ—Ç–∫–∏

* `messages` ‚Äî –ø—Ä–æ—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏. –î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏–≤–∞—Ç—å —Å–ª–æ–≤–∞—Ä–∏ –ø–æ —Ñ–∞–π–ª–∞–º –∏ –¥–µ–ª–∞—Ç—å lazy-loading.
* –§—É–Ω–∫—Ü–∏—è `t(key)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª—é—á, –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–µ—Ç ‚Äî —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –∑–∞–±—ã—Ç—ã–µ –∫–ª—é—á–∏.
* –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (`t('greeting', {name: '–ê–Ω–Ω–∞'})`), –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏-—à–∞–±–ª–æ–Ω—ã: `t('greeting').replace('{name}', name)`.

